!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},o={},i={}.hasOwnProperty,n=/^\.\.?(\/|$)/,a=function(e,t){for(var r,o=[],i=(n.test(t)?e+"/"+t:t).split("/"),a=0,s=i.length;a<s;a++)r=i[a],".."===r?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(r){var o=a(s(t),r);return e.require(o,t)}},d=function(e,t){var o=b&&b.createHot(e),i={id:e,exports:{},hot:o};return r[e]=i,t(i.exports,l(e),i),i.exports},h=function(e){return o[e]?h(o[e]):e},u=function(e,t){return h(a(s(e),t))},c=function(e,o){null==o&&(o="/");var n=h(e);if(i.call(r,n))return r[n].exports;if(i.call(t,n))return d(n,t[n]);throw new Error("Cannot find module '"+e+"' from '"+o+"'")};c.alias=function(e,t){o[t]=e};var p=/\.[^.\/]+$/,y=/\/index(\.[^\/]+)?$/,f=function(e){if(p.test(e)){var t=e.replace(p,"");i.call(o,t)&&o[t].replace(p,"")!==t+"/index"||(o[t]=e)}if(y.test(e)){var r=e.replace(y,"");i.call(o,r)||(o[r]=e)}};c.register=c.define=function(e,o){if(e&&"object"==typeof e)for(var n in e)i.call(e,n)&&c.register(n,e[n]);else t[e]=o,delete r[e],f(e)},c.list=function(){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};var b=e._hmr&&new e._hmr(u,c,t,r);c._cache=r,c.hmr=b&&b.wrap,c.brunch=!0,e.require=c}}(),function(){"undefined"==typeof window?this:window;require.register("demo/debugGUI.js",function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.value=0,e.listen=0,e}return n(t,e),a(t,[{key:"setupGUI",value:function(e){this.heroFolder=this.addFolder("Hero"),this.worldFolder=this.addFolder("World"),this.debugFolder=this.addFolder("Debug"),this.heroFolder.add(e.game.hero.body,"strength",0,10).step(1).name("Strength"),this.heroFolder.add(e.game.hero.body,"strength",0,10).step(1).name("MaxCue"),this.heroFolder.add(e.game.hero.body,"struggle",0,10).step(1).name("Struggle"),this.heroFolder.add(e.game.hero.body,"baseVelocity",1,480).step(1).name("Velocity"),this.heroFolder.add(e.game.hero,"debugger").name("Debug body"),this.heroFolder.add(e.game.hero.body,"collidable").name("Collidable"),this.heroFolder.add(e.game.hero.body,"activeSteps").name("Steps").listen(),this.heroFolder.open(),this.debugFolder.add(e.debugGfx.grid,"active").name("Grid"),this.debugFolder.add(e.debugGfx.collision,"active").name("Collision"),this.debugFolder.add(e.debugGfx.path,"active").name("Path"),this.debugFolder.add(e.debugGfx.pathCollision,"active").name("Path collision"),this.worldFolder.add(e.physics,"turnbased").name("Turn based"),this.worldFolder.open()}}]),t}(dat.GUI);e["default"]=s}),require.register("demo/main.js",function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=t("./states/Boot"),l=o(s),d=t("./states/Game"),h=o(d);window.EasyStar=t("easystarjs");var u=function(e){function t(){i(this,t);var e=document.documentElement.clientWidth>400?400:document.documentElement.clientWidth,r=Math.round(.6*e),o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,Phaser.CANVAS,"content",null,!1,!1));return o.state.add("Boot",l["default"],!1),o.state.add("Game",h["default"],!1),o.state.start("Boot"),o}return a(t,e),t}(Phaser.Game);window.game=new u}),require.register("demo/sprites/generic_enemy.js",function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=function(e){function t(e){var r=e.game,n=e.x,a=e.y,s=e.family,l=e.id;o(this,t);var d=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n,a,"sprites"));return d.animations.add("animation",[s+"/"+s+"0-"+l,s+"/"+s+"1-"+l],5,!0),d.game=r,d.exists=!0,d.reset(n,a),d.play("animation"),d.game.physics.gridPhysics.enable(d),d.body.immovable=!0,d.body.collideWorldBounds=!0,d.game.add.existing(d),d.turnSteps=d.body.activeSteps+1,d}return n(t,e),a(t,[{key:"update",value:function(){if((this.body.myTurn||!this.body.physics.turnbased)&&(1==this.turnSteps&&(this.turnSteps=0,this.body.physics.nextTurn(this.body)),0===this.body.velocity.x&&0===this.body.velocity.y||!(Math.random()<.1))){this.body.physics.turnbased?this.body.baseVelocity=75:this.body.baseVelocity=20;var e=0,t=0;switch(Math.round(3*Math.random())){case 0:e=this.body.baseVelocity;break;case 1:e=-this.body.baseVelocity;break;case 2:t=this.body.baseVelocity;break;case 3:t=-this.body.baseVelocity}this.body.setVelocity(e,t),this.body.physics.turnbased&&this.turnSteps++}}}]),t}(Phaser.Sprite);e["default"]=s}),require.register("demo/states/Boot.js",function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=t("./Game"),d=(o(l),function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"preload",value:function(){this.game.load.image("enemy","./assets/images/enemy.png"),this.game.load.image("basictiles","./assets/images/basictiles.png"),this.game.load.tilemap("map","./assets/maps/demo.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.atlas("sprites","assets/spriteatlas/sprites.png","assets/spriteatlas/sprites.json",Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY)}},{key:"create",value:function(){this.game.smoothed=!1,this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.setMinMax(400,240,1200,720),this.game.load.onLoadComplete.add(this.loadComplete,this),this.loadComplete()}},{key:"loadComplete",value:function(){this.state.start("Game")}}]),t}(Phaser.State));e["default"]=d}),require.register("demo/states/Game.js",function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=t("../../plugin/gridPhysics/gridPhysics"),d=o(l),h=t("../sprites/generic_enemy"),u=o(h),c=t("../debugGUI"),p=o(c),y=function(e){function t(e){i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.game=e,r}return a(t,e),s(t,[{key:"create",value:function(){var e=this.game;window.game=e,e.plugins.add(new d["default"](this.game)),e.physics.gridPhysics.gridSize.set(8),this.debugGfx=e.physics.gridPhysics.debugGfx,this.physics=e.physics.gridPhysics,e.map=e.add.tilemap("map",16,16);var t=e.map;this.map=t,t.addTilesetImage("basictiles");var r=t.createLayer("ground");r=t.createLayer("onGround"),e.physics.gridPhysics.enable(r);for(var o=0;o<r.layer.data.length;o++)for(var i=0;i<r.layer.data[o].length;i++){var n=r.layer.data[o][i];if(n.index!==-1){var a=!0,s=!1,l=void 0;try{for(var h,c=Object.keys(n.properties)[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var y=h.value;(n.hasOwnProperty(y)||0===y.indexOf("blocked"))&&(y.indexOf("blocked")>-1&&console.log("blocked"+y),n[y]=n.properties[y])}}catch(f){s=!0,l=f}finally{try{!a&&c["return"]&&c["return"]()}finally{if(s)throw l}}if(n.properties.collide)for(var b=["collideUp","collideRight","collideDown","collideLeft"],m=0;m<b.length;m++){var g=b[m];n[g]=!0}}}r.updateBlocked(),r.resizeWorld();var v=!0,w=!1,_=void 0;try{for(var P,O=this.map.objects.objects[Symbol.iterator]();!(v=(P=O.next()).done);v=!0){var j=P.value,x="box";j.properties&&j.properties.box&&(x+=j.properties.box);var k=e.add.sprite(j.x,j.y-16,"sprites");k.animations.add("box",[x],5,!1),k.play("box"),j.properties&&j.properties.scale?(k.width=16*j.properties.scale,k.height=16*j.properties.scale):(k.width=16,k.height=16),k.smoothed=!1,e.physics.gridPhysics.enable(k),k.body.collideWorldBounds=!0,j.properties&&j.properties.mass&&(k.body.mass=j.properties.mass)}}catch(f){w=!0,_=f}finally{try{!v&&O["return"]&&O["return"]()}finally{if(w)throw _}}this.enemy=new u["default"]({game:e,x:96,y:0,family:"humanoid",id:"4-2"}),this.enemy.body.strength=1e3,e.hero=e.add.sprite(320,33,"sprites"),e.hero.animations.add("down",["hero/hero-down-0","hero/hero-down-1"],5,!0),e.hero.animations.add("right",["hero/hero-right-0","hero/hero-right-1"],5,!0),e.hero.animations.add("left",["hero/hero-left-0","hero/hero-left-1"],5,!0),e.hero.animations.add("up",["hero/hero-up-0","hero/hero-up-1"],5,!0),e.hero.animations.add("hit-down",["hero/hero-hit-down-0","hero/hero-hit-down-1","hero/hero-hit-down-2","hero/hero-hit-down-3"],15,!1),e.hero.animations.add("hit-right",["hero/hero-hit-right-0","hero/hero-hit-right-1","hero/hero-hit-right-2","hero/hero-hit-right-3"],15,!1),e.hero.animations.add("hit-left",["hero/hero-hit-left-0","hero/hero-hit-left-1","hero/hero-hit-left-2","hero/hero-hit-left-3"],15,!1),e.hero.animations.add("hit-up",["hero/hero-hit-up-0","hero/hero-hit-up-1","hero/hero-hit-up-2","hero/hero-hit-up-3"],15,!1),e.hero.play("down"),e.physics.gridPhysics.enable(e.hero),e.hero.body.player=!0,e.hero.body.baseVelocity=75,e.hero.body.strength=10,e.hero.body.maxCue=10,e.hero["debugger"]=!1,e.hero.body.collideWorldBounds=!0,e.hero.body.immovable=!0,e.marker=e.add.sprite(0,0,"sprites"),e.marker.animations.add("blink",["marker/blink1","marker/blink2"],5,!0),e.marker.play("blink"),this.cursors=e.input.keyboard.createCursorKeys(),this.renderGrid=!1,this.debugGUI||(this.debugGUI=new p["default"]),this.debugGUI.setupGUI(this),e.input.mouse.capture=!0,this.physics.addToQue(this.enemy),this.physics.addToQue(e.hero),this.physics.nextTurn(),e.hero.body.turnSteps=e.hero.body.activeSteps+1}},{key:"update",value:function(){var e=this.game,t=this.game.hero;if(t.body.myTurn||!t.body.physics.turnbased){e.hero.body.setVelocity(0,0),t.body.activeSteps>=t.body.turnSteps&&(t.body.turnSteps=t.body.activeSteps+1,this.physics.nextTurn(t.body)),e.marker.x=8*Math.round(e.input.activePointer.x/8),e.marker.y=8*Math.round(e.input.activePointer.y/8);var r="";switch(t.body.facing){case Phaser.UP:r="up";break;case Phaser.RIGHT:r="right";break;case Phaser.DOWN:r="down";break;case Phaser.LEFT:r="left"}t.body.struggling&&(r="hit-"+r),t.play(r),t.body.struggling||t.body.isMoving.any||t.animations.stop();var o=e.hero.body.baseVelocity;e.input.activePointer.isDown&&t.body.moveToPixelXY(e.input.activePointer.x,e.input.activePointer.y,o),e.input.keyboard.isDown(Phaser.Keyboard.LEFT)?e.hero.body.setVelocity(-o,0):e.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&e.hero.body.setVelocity(o,0),e.input.keyboard.isDown(Phaser.Keyboard.UP)?e.hero.body.setVelocity(0,-o):e.input.keyboard.isDown(Phaser.Keyboard.DOWN)&&e.hero.body.setVelocity(0,o)}}},{key:"render",value:function(){this.game.hero["debugger"]&&this.game.hero.body.renderDebugBody()}}]),t}(Phaser.State);e["default"]=y}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");